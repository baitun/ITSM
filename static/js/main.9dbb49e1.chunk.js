(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e){e.exports=[{key:"1",locality:"Irkutsk",system:"Billing",description:"Billing doesn't work in Irkutsk from 6 am",entryid:"000001",isopen:1,bdate:"2018-01-01 06:00:00",edate:""},{key:"2",locality:"Rostov-on-Don",system:"CRM",description:"There is something wrong with CRM sytem",entryid:"000002",isopen:0,bdate:"2018-02-01 09:00:00",edate:"2018-02-01 10:00:00"},{key:"3",locality:"Saransk",system:"Mail",description:"All users have a problem with mail",entryid:"000003",isopen:0,bdate:"2018-02-01 09:00:00",edate:"2018-02-01 10:00:00"},{key:"4",locality:"Chelyabinsk",system:"Internet",description:"Internet connection lost",entryid:"000004",isopen:0,bdate:"2018-02-01 09:00:00",edate:"2018-02-01 10:00:00"}]},205:function(e,t,a){},207:function(e,t,a){},240:function(e,t,a){e.exports=a(353)},353:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(9),i=a.n(l),c=(a(205),a(38)),o=a(39),s=a(30),u=a(40),m=a(41),d=a(358),p=(a(207),a(83)),b=[{dataIndex:"locality",title:"Locality (City)",editable:!0,sorter:function(e,t){return(""+e.locality).localeCompare(t.locality)},onFilter:function(e,t){return 0===t.locality.indexOf(e)},filters:[{text:"Irkutsk",value:"Irkutsk"},{text:"Rostov",value:"Rostov"},{text:"Saransk",value:"Saransk"},{text:"Chelyabinsk",value:"Chelyabinsk"}]},{dataIndex:"system",title:"System name",editable:!0,sorter:function(e,t){return e.system>t.system}},{dataIndex:"entryid",title:"BPM Ticket",editable:!0,render:function(e){return r.a.createElement("a",{href:"https://bpmonline.com/?tt=".concat(e),target:"_blank",rel:"noreferrer noopener"},e)}},{dataIndex:"isopen",title:"Is open?",editable:!0,render:function(e,t){return r.a.createElement(p.a,{disabled:!0,checked:e})}}],f=a(119),E=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("b",null,"Description:")," ",e.description),r.a.createElement("div",null,r.a.createElement("b",null,"Date start:")," ",e.bdate),r.a.createElement("div",null,r.a.createElement("b",null,"Date end:")," ",e.edate))},h=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleTableChange=function(e,t,a){console.log(a)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{columns:b,dataSource:f,onChange:this.handleTableChange,expandedRowRender:E,pagination:!1})}}]),t}(r.a.Component),v=a(91),y=a(31),g=a(355),k=a(359),O=a(361),C=a(90),j=a(362),I=a(360),w=k.a.create()(function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,l=e.form.getFieldDecorator,i={labelCol:{span:6},wrapperCol:{span:18}};return r.a.createElement(O.a,{visible:t,title:"Create a new Ticket",onCancel:a,onOk:n},r.a.createElement(k.a,null,r.a.createElement(k.a.Item,Object.assign({},i,{label:"Locality (City)"}),l("title")(r.a.createElement(C.a,{mode:"multiple"},r.a.createElement(C.a.Option,{value:"0"},"Irkutsk"),r.a.createElement(C.a.Option,{value:"1"},"Rostov-on-Don"),r.a.createElement(C.a.Option,{value:"2"},"Saransk"),r.a.createElement(C.a.Option,{value:"3"},"Chelyabinsk")))),r.a.createElement(k.a.Item,Object.assign({},i,{label:"System"}),l("system")(r.a.createElement(C.a,null,r.a.createElement(C.a.Option,{value:"0"},"BPM"),r.a.createElement(C.a.Option,{value:"1"},"CRM"),r.a.createElement(C.a.Option,{value:"2"},"Mail"),r.a.createElement(C.a.Option,{value:"3"},"Internet")))),r.a.createElement(k.a.Item,Object.assign({},i,{label:"Description"}),l("description")(r.a.createElement(j.a.TextArea,{autosize:{minRows:2}}))),r.a.createElement(k.a.Item,Object.assign({},i,{label:"BPM Ticket ID"}),l("descentryidription")(r.a.createElement(j.a,null))),r.a.createElement(k.a.Item,Object.assign({},i,{label:"Is open?"}),l("isopen")(r.a.createElement(p.a,null))),r.a.createElement(k.a.Item,Object.assign({},i,{label:"Date start"}),l("bdate")(r.a.createElement(I.a,null))),r.a.createElement(k.a.Item,Object.assign({},i,{label:"Date end"}),l("edate")(r.a.createElement(I.a,null)))))}}]),t}(r.a.Component)),x=a(119),S=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("b",null,"Description:")," ",e.description),r.a.createElement("div",null,r.a.createElement("b",null,"Date start:")," ",e.bdate),r.a.createElement("div",null,r.a.createElement("b",null,"Date end:")," ",e.edate))},T=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleCreate=function(){var e=a.formRef.props.form;e.validateFields(function(t,n){t||(console.log("Received values of form: ",n),e.resetFields(),a.setState({visible:!1}))})},a.saveFormRef=function(e){a.formRef=e},a.handleTableChange=function(e,t,a){console.log(a)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=Object(v.a)(b).concat([{title:"operation",dataIndex:"operation",render:function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{shape:"circle",icon:"edit",title:"edit",onClick:function(){return e.showModal(a)}}),"\xa0",r.a.createElement(g.a,{title:"Sure to cancel?",onConfirm:function(){return console.log(a.key)}},r.a.createElement(y.a,{shape:"circle",icon:"delete",title:"delete"})))}}]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{type:"primary",onClick:this.showModal},"New Ticket"),r.a.createElement(w,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.handleCancel,onCreate:this.handleCreate}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(d.a,{columns:t,dataSource:x,onChange:this.handleTableChange,expandedRowRender:S,pagination:!1,size:"middle",rowClassName:function(e,t){return e.isopen?"ticket-opened":"ticket-closed"}}))}}]),t}(r.a.Component),R=a(203),M=a(204),D=(a(348),a(363)),F=a(119),B=k.a.Item,A=r.a.createContext(),K=k.a.create()(function(e){var t=e.form,a=(e.index,Object(M.a)(e,["form","index"]));return r.a.createElement(A.Provider,{value:t},r.a.createElement("tr",a))}),P=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).getInput=function(){return"number"===a.props.inputType?r.a.createElement(D.a,null):r.a.createElement(j.a,null)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.editing,n=t.dataIndex,l=t.title,i=(t.inputType,t.record),c=(t.index,Object(M.a)(t,["editing","dataIndex","title","inputType","record","index"]));return r.a.createElement(A.Consumer,null,function(t){var o=t.getFieldDecorator;return r.a.createElement("td",c,a?r.a.createElement(B,{style:{margin:0}},o(n,{rules:[{required:!0,message:"Please Input ".concat(l,"!")}],initialValue:i[n]})(e.getInput())):c.children)})}}]),t}(r.a.Component),z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).isEditing=function(e){return e.key===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.state={data:F,editingKey:""},a.columns=Object(v.a)(b).concat([{title:"operation",dataIndex:"operation",render:function(e,t){var n=a.isEditing(t);return r.a.createElement("div",null,n?r.a.createElement("span",null,r.a.createElement(A.Consumer,null,function(e){return r.a.createElement(y.a,{onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Save")}),r.a.createElement(g.a,{title:"Sure to cancel?",onConfirm:function(){return a.cancel(t.key)}},r.a.createElement(y.a,null,"Cancel"))):r.a.createElement(y.a,{shape:"circle",icon:"edit",onClick:function(){return a.edit(t.key)}}))}}]),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"save",value:function(e,t){var a=this;e.validateFields(function(e,n){if(!e){var r=Object(v.a)(a.state.data),l=r.findIndex(function(e){return t===e.key});if(l>-1){var i=r[l];r.splice(l,1,Object(R.a)({},i,n)),a.setState({data:r,editingKey:""})}else r.push(n),a.setState({data:r,editingKey:""})}})}},{key:"render",value:function(){var e=this,t={body:{row:K,cell:P}},a=this.columns.map(function(t){return t.editable?Object(R.a)({},t,{onCell:function(a){return{record:a,inputType:"text",dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a)}}}):t});return r.a.createElement(d.a,{components:t,bordered:!0,dataSource:this.state.data,columns:a,pagination:!1,size:"middle",rowClassName:"editable-row"})}}]),t}(r.a.Component),L=a(356),N=a(202),_=a(237),J=a.n(_),W=a(364),q=a(357),V=a(366),$=a(365),G=a(367),H=function(e,t){return t.some(function(t){return e.roles.includes(t)})},Q={roles:["user"],rights:["can_view_articles"]},U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={user:Q},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.user;return r.a.createElement(L.a,{locale:J.a},r.a.createElement(W.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{mode:"horizontal"},r.a.createElement(N.a.Item,{onClick:function(){return e.setState(function(e){return{user:{roles:e.user.roles.includes("admin")?["user"]:["admin"]}}})}},t.roles.includes("admin")?"Logout":"Login"),r.a.createElement(N.a.Item,null,r.a.createElement(q.a,{to:"/"},"Tickets")),H(t,["admin"])&&r.a.createElement(N.a.Item,null,r.a.createElement(q.a,{to:"admin"},"Admin"))),r.a.createElement("h1",null,"IT Service Management"),r.a.createElement(V.a,null,r.a.createElement($.a,{exact:!0,from:"/",to:"/ITSM/"}),r.a.createElement(G.a,{exact:!0,path:"/ITSM",component:h}),r.a.createElement(G.a,{exact:!0,path:"/ITSM/edit",component:z}),H(t,["admin"])&&r.a.createElement(G.a,{exact:!0,path:"/ITSM/admin",component:T}),r.a.createElement(G.a,{component:function(){return r.a.createElement("div",null,"404. Page Not Found")}})))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[240,2,1]]]);
//# sourceMappingURL=main.9dbb49e1.chunk.js.map